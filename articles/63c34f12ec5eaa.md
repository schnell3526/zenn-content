---
title: "Pythonã§ãƒ†ã‚¹ãƒˆã‚’æ›¸ã"
emoji: "ðŸ¥"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['Python']
published: false
---
Pythonã§ãƒ†ã‚¹ãƒˆã‚’æ›¸ãæ–¹æ³•ã¨ã—ã¦ã€å¤§ããåˆ†ã‘ã¦æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®unittestã‚’ä½¿ã†æ–¹æ³•ã¨3rdãƒ‘ãƒ¼ãƒ†ã‚£è£½ã®pytestã‚’ä½¿ã†æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚
ç¾åœ¨ä¸»æµãªã®ã¯pytestã‚’ä½¿ã†æ–¹æ³•ã§ã™ã®ã§ãã¡ã‚‰ã«ã¤ã„ã¦ç°¡å˜ãªä½¿ã„æ–¹ã‚’è¨˜ã—ã¾ã™ã€‚
åŸºæœ¬çš„ã«[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.pytest.org/en/latest/contents.html)ã‚’å‚è€ƒã«ã—ã¦ã„ã¾ã™ã€‚


# ã‚½ãƒ¼ã‚¹ã¨ãƒ†ã‚¹ãƒˆã‚’åˆ†ã‘ãªã„å ´åˆ

```
.
â””â”€â”€ src
    â”œâ”€â”€ fibonacci.py
    â””â”€â”€ test_fibonacci.py
```

```python:fibonacci.py
def Fibonacci() -> int:
    ls = {0: 0, 1: 1}
    def f(n):
        nonlocal ls
        if len(ls) <= n:
            ls[n] = f(n-2) + f(n-1)
        return ls[n]
    return f
```
```python:test_fibonacci.py
from fibonacci import Fibonacci

def test_Fibonacci():
    fib = Fibonacci()
    assert fib(10) == 55
```
ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒã‚½ãƒ¼ã‚¹ã¨åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹å ´åˆã¯é›£ã—ããªãã€ã“ã®ã¾ã¾`pytest`ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚


# ã‚½ãƒ¼ã‚¹ã¨ãƒ†ã‚¹ãƒˆã‚’åˆ†ã‘ã‚‹å ´åˆ
è‡ªåˆ†ã§ã‚ã‚‹ç¨‹åº¦ã¾ã¨ã¾ã£ãŸã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå ´åˆã¯ã‚½ãƒ¼ã‚¹ã¨ãƒ†ã‚¹ãƒˆã¯åˆ†ã‘ã‚‹ã®ãŒæœ›ã¾ã—ã„ã‹ã¨æ€ã„ã¾ã™ã€‚
```
.
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ src
â”‚   â””â”€â”€ fibonacci.py
â””â”€â”€ tests
    â””â”€â”€ test_fibonacci.py
```
```python:test_fibonacci.py
import pytest

from src.fibonacci import Fibonacci

@pytest.mark.parametrize(('number', 'expected'),[
    (0, 0),
    (1, 1),
    (2, 1),
    (100, 354224848179261915075),
    (500, 139423224561697880139724382870407283950070256587697307264108962948325571622863290691557658876222521294125),
])
def test_fibonacci(number, expected):
    fib = Fibonacci()
    assert fib(number) == expected
```
ãã®éš›ã€`pytest`ã¨å®Ÿè¡Œã—ã¦ã‚‚importã®éš›ã«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚
```
    from src.fibonacci import Fibonacci
E   ModuleNotFoundError: No module named 'src'
```
ã“ã‚Œã®å¯¾å¿œç­–ã®ä¸€ã¤ã¯`pyproject.toml`ã‚’ç”¨æ„ã—ã¦ãƒ«ãƒ¼ãƒˆã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã«åŠ ãˆã‚‹ã“ã¨ã§ã™ã€‚
```toml:pyproject.tomls
[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "YOUR_PACKAGE_NAME"
version = "0.0.1"
```
ä¸Šã®ã‚ˆã†ãªtomlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—
```shell
pip install -e .
```
ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€ãƒ«ãƒ¼ãƒˆã‹ã‚‰ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒå¯èƒ½ã«ãªã‚Šã‚¨ãƒ©ãƒ¼ãŒå‡ºãªããªã‚Šã¾ã™ã€‚